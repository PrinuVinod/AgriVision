<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <meta name="viewport" content="initial-scale=1, maximum-scale=1">
   <title>AgriVision</title>
   <meta name="keywords" content="">
   <meta name="description" content="">
   <meta name="author" content="">
   <link rel="stylesheet" href="css/bootstrap.min.css">
   <link rel="stylesheet" href="css/style.css">
   <link rel="stylesheet" href="css/responsive.css">
   <link rel="icon" href="images/fevicon.png" type="image/gif" />
   <link rel="stylesheet" href="css/owl.carousel.min.css">
   <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
   <link rel="stylesheet" href="css/bootstrap-datepicker.min.css">
   <link rel="stylesheet" href="css/detection.css">
   <link rel="icon" href="images/logo.png">

   <!-- Add the following script for AJAX -->
   <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
   <script>
      function detectWeeds() {
         // Get the selected image file
         var fileInput = document.getElementById('imageInput');
         var file = fileInput.files[0];

         // Create a FormData object to send the image file
         var formData = new FormData();
         formData.append('image', file);

         // Send a POST request to start weed detection
         $.ajax({
            type: 'POST',
            url: '/detect_weeds',
            data: formData,
            contentType: false,
            processData: false,
            success: function (response) {
               console.log(response);
               // Handle success, e.g., display a message to the user
               alert('Detection started successfully!');
            },
            error: function (error) {
               console.error('Error:', error);
               // Handle error, e.g., display an error message
               alert('Error starting detection!');
            }
         });
      }
   </script>
</head>

<body class="main-layout">
   <div class="full_bg">
      <!-- header -->
      <header class="header-area">
         <div class="container-fluid">
            <div class="row d_flex">
               <div class=" col-md-2 col-sm-3">
                  <div class="logo">
                     <a href="index.html">Agri<span>Vision</span></a>
                  </div>
               </div>
               <div class="col-md-8 col-sm-9">
                  <div class="navbar-area">
                     <nav class="site-navbar">
                        <ul>
                           <li><a class="active" href="index.html">Home</a></li>
                        </ul>
                        <button class="nav-toggler">
                           <span></span>
                        </button>
                     </nav>
                  </div>
               </div>
            </div>
         </div>
      </header>
      <!-- end header inner -->
      <br>
      <br>
      <br>
      <br>

      <!-- Add the file input and detect button -->
      <input type="file" id="imageInput" accept="image/*">
   <button style="width: 500px; margin-top: 20px; font-size: x-large; background-color: #6b7908;" onclick="detectWeeds()" id="detectButton">Detect Weeds</button>

      <!-- Add a div to display the detection output -->
      <div id="detectionOutput"></div>

      <!-- footer -->
      <div class="copyright">
         <div class="container">
            <div class="row d_flex">
               <div class="col-md-8">
                  <p>Â© 2023 All Rights Reserved.</a></p>
               </div>
            </div>
         </div>
      </div>
   </div>
   </footer>
   <!-- end footer -->
   </div>
   <!-- Javascript files-->
   <script src="js/jquery.min.js"></script>
   <script src="js/bootstrap.bundle.min.js"></script>
   <script src="js/jquery-3.0.0.min.js"></script>
   <script src="js/owl.carousel.min.js"></script>
   <script src="js/bootstrap-datepicker.min.js"></script>
   <script src="js/custom.js"></script>
</body>

</html>